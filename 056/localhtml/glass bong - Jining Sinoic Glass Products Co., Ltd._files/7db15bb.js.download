(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{1169:function(e,t,i){(function(t){function i(e){try{if(!t.localStorage)return!1}catch(e){return!1}var i=t.localStorage[e];return null!=i&&"true"===String(i).toLowerCase()}e.exports=function(e,t){if(i("noDeprecation"))return e;var r=!1;return function(){if(!r){if(i("throwDeprecation"))throw new Error(t);i("traceDeprecation"),r=!0}return e.apply(this,arguments)}}}).call(this,i(31))},1262:function(e,t,i){"use strict";var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),n=function(e,t,i){for(var r=!0;r;){var n=e,a=t,s=i;r=!1,null===n&&(n=Function.prototype);var o=Object.getOwnPropertyDescriptor(n,a);if(void 0!==o){if("value"in o)return o.value;var u=o.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=a,i=s,r=!0,o=l=void 0}};function a(e){return e&&e.__esModule?e:{default:e}}var s=a(i(414)),o=a(i(415)),u=a(i(192)),l=a(i(1277)),d=i(625),c=a(i(238)),f=i(1284),h=a(i(622)),m=a(i(87)),g=i(1308),p=a(i(295)),y=a(i(1321)),_=a(i(75)),v=a(i(1322)),b=a(i(1323)),T=i(637),S={PlaylistLoader:o.default,Playlist:u.default,Decrypter:d.Decrypter,AsyncStream:d.AsyncStream,decrypt:d.decrypt,utils:c.default,STANDARD_PLAYLIST_SELECTOR:T.lastBandwidthSelector,INITIAL_PLAYLIST_SELECTOR:T.lowestBitrateCompatibleVariantSelector,comparePlaylistBandwidth:T.comparePlaylistBandwidth,comparePlaylistResolution:T.comparePlaylistResolution,xhr:(0,l.default)()},k=4194304;["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach((function(e){Object.defineProperty(S,e,{get:function(){return m.default.log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing"),p.default[e]},set:function(t){m.default.log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing"),"number"!=typeof t||t<0?m.default.log.warn("value of Hls."+e+" must be greater than or equal to 0"):p.default[e]=t}})}));var L,E=function(e,t){for(var i=t.media(),r=-1,n=0;n<e.length;n++)if(e[n].id===i.uri){r=n;break}e.selectedIndex_=r,e.trigger({selectedIndex:r,type:"change"})};S.canPlaySource=function(){return m.default.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")},S.supportsNativeHls=(L=s.default.createElement("video"),!!m.default.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some((function(e){return/maybe|probably/i.test(L.canPlayType(e))}))),S.isSupported=function(){return m.default.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var O=function(e){function t(e,i,r){var a=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,i,r.hls),i.options_&&i.options_.playerId){var o=(0,m.default)(i.options_.playerId);o.hasOwnProperty("hls")||Object.defineProperty(o,"hls",{get:function(){return m.default.log.warn("player.hls is deprecated. Use player.tech_.hls instead."),i.trigger({type:"usage",name:"hls-player-access"}),a}})}if(this.tech_=i,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&(i.featuresNativeVideoTracks||i.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");this.on(s.default,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],(function(e){var t=s.default.fullscreenElement||s.default.webkitFullscreenElement||s.default.mozFullScreenElement||s.default.msFullscreenElement;t&&t.contains(a.tech_.el())&&a.masterPlaylistController_.fastQualityChange_()})),this.on(this.tech_,"seeking",(function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())})),this.on(this.tech_,"error",(function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()})),this.on(this.tech_,"play",this.play)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"setOptions_",value:function(){var e=this;this.options_.withCredentials=this.options_.withCredentials||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=k),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===k,["withCredentials","bandwidth","handleManifestRedirects"].forEach((function(t){void 0!==e.source_[t]&&(e.options_[t]=e.source_[t])})),this.bandwidth=this.options_.bandwidth}},{key:"src",value:function(e){var t=this;e&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=S,this.masterPlaylistController_=new g.MasterPlaylistController(this.options_),this.playbackWatcher_=new v.default(m.default.mergeOptions(this.options_,{seekable:function(){return t.seekable()}})),this.masterPlaylistController_.on("error",(function(){m.default.players[t.tech_.options_.playerId].error(t.masterPlaylistController_.error)})),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):S.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=S.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e,t=1/(this.bandwidth||1);return e=this.throughput>0?1/this.throughput:0,Math.floor(1/(t+e))},set:function(){m.default.log.error('The "systemBandwidth" property is read-only')}}}),Object.defineProperties(this.stats,{bandwidth:{get:function(){return t.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return t.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return t.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return t.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return t.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return t.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return t.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return t.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.masterPlaylistController_.on("selectedinitialmedia",(function(){(0,y.default)(t)})),this.on(this.masterPlaylistController_,"progress",(function(){this.tech_.trigger("progress")})),this.on(this.masterPlaylistController_,"firstplay",(function(){this.ignoreNextSeekingEvent_=!0})),this.tech_.ready((function(){return t.setupQualityLevels_()})),this.tech_.el()&&this.tech_.src(m.default.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function(){var e=this,t=m.default.players[this.tech_.options_.playerId];t&&t.qualityLevels&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var t,i;t=e.qualityLevels_,(i=e).representations().forEach((function(e){t.addQualityLevel(e)})),E(t,i.playlists)})),this.playlists.on("mediachange",(function(){E(e.qualityLevels_,e.playlists)})))}},{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(e){this.masterPlaylistController_.setCurrentTime(e)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),n(Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}}]),t}(m.default.getComponent("Component")),I=function e(t){return{canHandleSource:function(i){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=m.default.mergeOptions(m.default.options,r);return(!n.hls||!n.hls.mode||n.hls.mode===t)&&e.canPlayType(i.type,n)},handleSource:function(e,i){var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],n=m.default.mergeOptions(m.default.options,r,{hls:{mode:t}});return"flash"===t&&i.setTimeout((function(){i.trigger("loadstart")}),1),i.hls=new O(e,i,n),i.hls.xhr=(0,l.default)(),i.hls.src(e.src),i.hls},canPlayType:function(t){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=m.default.mergeOptions(m.default.options,i);return e.canPlayType(t,r)?"maybe":""}}};I.canPlayType=function(e,t){return!(m.default.browser.IE_VERSION&&m.default.browser.IE_VERSION<=10)&&!(!t.hls.overrideNative&&S.supportsNativeHls)&&/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(e)},void 0!==m.default.MediaSource&&void 0!==m.default.URL||(m.default.MediaSource=f.MediaSource,m.default.URL=f.URL);var w=m.default.getTech("Flash");f.MediaSource.supportsNativeMediaSources()&&m.default.getTech("Html5").registerSourceHandler(I("html5"),0),_.default.Uint8Array&&w&&w.registerSourceHandler(I("flash")),m.default.HlsHandler=O,m.default.HlsSourceHandler=I,m.default.Hls=S,m.default.use||m.default.registerComponent("Hls",S),m.default.m3u8=h.default,m.default.options.hls=m.default.options.hls||{},m.default.registerPlugin?m.default.registerPlugin("reloadSourceOnError",b.default):m.default.plugin("reloadSourceOnError",b.default),e.exports={Hls:S,HlsHandler:O,HlsSourceHandler:I}},1264:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(i(1265)),a=r(i(75));t.default=function(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=n.default.buildAbsoluteURL(a.default.location.href,e)),n.default.buildAbsoluteURL(e,t))},e.exports=t.default},1277:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=i(87),a=(r=n)&&r.__esModule?r:{default:r};t.default=function(){return function e(t,i){t=(0,n.mergeOptions)({timeout:45e3},t);var r=e.beforeRequest||a.default.Hls.xhr.beforeRequest;if(r&&"function"==typeof r){var s=r(t);s&&(t=s)}var o=(0,n.xhr)(t,(function(e,t){var r=o.response;!e&&r&&(o.responseTime=Date.now(),o.roundTripTime=o.responseTime-o.requestTime,o.bytesReceived=r.byteLength||r.length,o.bandwidth||(o.bandwidth=Math.floor(o.bytesReceived/o.roundTripTime*8*1e3))),e&&"ETIMEDOUT"===e.code&&(o.timedout=!0),e||o.aborted||200===t.statusCode||206===t.statusCode||0===t.statusCode||(e=new Error("XHR Failed with a response of: "+(o&&(r||o.responseText)))),i(e,o)})),u=o.abort;return o.abort=function(){return o.aborted=!0,u.apply(o,arguments)},o.uri=t.uri,o.requestTime=Date.now(),o}},e.exports=t.default},1308:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();function n(e){return e&&e.__esModule?e:{default:e}}var a=n(i(415)),s=i(192),o=n(i(636)),u=n(i(1311)),l=n(i(422)),d=n(i(87)),c=n(i(1312)),f=n(i(1313)),h=i(294),m=n(i(420)),g=n(i(640)),p=n(i(295)),y=i(638),_=i(1320),v=void 0,b={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},T=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],S=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},k=function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,(function(e){return(0,h.translateLegacyCodecs)([e])[0]}))};t.mapLegacyAvcCodecs_=k;var L=function(e,t,i){return e+"/"+t+'; codecs="'+i.filter((function(e){return!!e})).join(", ")+'"'},E=function(e,t){var i=function(e){return e.segments&&e.segments.length&&e.segments[0].map?"mp4":"mp2t"}(t),r=function(e){var t=e.attributes||{};return t.CODECS?(0,y.parseCodecs)(t.CODECS):b}(t),n=t.attributes||{},a=!0,s=!1;if(!t)return[];if(e.mediaGroups.AUDIO&&n.AUDIO){var o=e.mediaGroups.AUDIO[n.AUDIO];if(o)for(var u in s=!0,a=!1,o)if(!o[u].uri){a=!0;break}}s&&!r.audioProfile&&(d.default.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),r.audioProfile=b.audioProfile);var l={};r.videoCodec&&(l.video=""+r.videoCodec+r.videoObjectTypeIndicator),r.audioProfile&&(l.audio="mp4a.40."+r.audioProfile);var c=L("audio",i,[l.audio]),f=L("video",i,[l.video]),h=L("video",i,[l.video,l.audio]);return s?!a&&l.video?[f,c]:[h,c]:l.video?[h]:[c]};t.mimeTypesForPlaylist_=E;var O=function(e){function t(e){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,i){for(var r=!0;r;){var n=e,a=t,s=i;r=!1,null===n&&(n=Function.prototype);var o=Object.getOwnPropertyDescriptor(n,a);if(void 0!==o){if("value"in o)return o.value;var u=o.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=a,i=s,r=!0,o=l=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);var r=e.url,n=e.handleManifestRedirects,s=e.withCredentials,l=e.mode,c=e.tech,h=e.bandwidth,p=e.externHls,y=e.useCueTags,b=e.blacklistDuration,k=e.enableLowInitialPlaylist;if(!r)throw new Error("A non-empty playlist URL is required");v=p,this.tech_=c,this.hls_=c.hls,this.mode_=l,this.useCueTags_=y,this.blacklistDuration=b,this.enableLowInitialPlaylist=k,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:s,handleManifestRedirects:n,timeout:null},this.mediaTypes_=(0,_.createMediaTypes)(),this.mediaSource=new d.default.MediaSource({mode:l}),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_.bind(this)),this.seekable_=d.default.createTimeRanges(),this.hasPlayed_=function(){return!1},this.syncController_=new f.default(e),this.segmentMetadataTrack_=c.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=(0,m.default)(g.default,function(){var e=void 0;try{e=640}catch(e){}return e}());var L={hls:this.hls_,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:function(){return i.seekable()},seeking:function(){return i.tech_.seeking()},duration:function(){return i.mediaSource.duration},hasPlayed:function(){return i.hasPlayed_()},goalBufferLength:function(){return i.goalBufferLength()},bandwidth:h,syncController:this.syncController_,decrypter:this.decrypter_};this.masterPlaylistLoader_=new a.default(r,this.hls_,this.requestOptions_),this.setupMasterPlaylistLoaderListeners_(),this.mainSegmentLoader_=new o.default(d.default.mergeOptions(L,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new o.default(d.default.mergeOptions(L,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new u.default(d.default.mergeOptions(L,{loaderType:"vtt"}),e),this.setupSegmentLoaderListeners_(),T.forEach((function(e){i[e+"_"]=S.bind(i,e)})),this.masterPlaylistLoader_.load()}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",(function(){var t=e.masterPlaylistLoader_.media(),i=1.5*e.masterPlaylistLoader_.targetDuration*1e3;(0,s.isLowestEnabledRendition)(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=i,t.endList&&"none"!==e.tech_.preload()&&(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),(0,_.setupMediaGroups)({segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,mode:e.mode_,hls:e.hls_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),t);try{e.setupSourceBuffers_()}catch(t){return d.default.log.warn("Failed to create SourceBuffers",t),e.mediaSource.endOfStream("decode")}e.setupFirstPlay(),e.trigger("selectedinitialmedia")})),this.masterPlaylistLoader_.on("loadedplaylist",(function(){var t,i=e.masterPlaylistLoader_.media();if(!i){var r=void 0;return e.enableLowInitialPlaylist&&(r=e.selectInitialPlaylist()),r||(r=e.selectPlaylist()),e.initialMedia_=r,void e.masterPlaylistLoader_.media(e.initialMedia_)}e.useCueTags_&&e.updateAdCues_(i),e.mainSegmentLoader_.playlist(i,e.requestOptions_),e.updateDuration(),e.tech_.paused()||e.mainSegmentLoader_.load(),i.endList||(t=function(){var t=e.seekable();0!==t.length&&e.mediaSource.addSeekableRange_(t.start(0),t.end(0))},e.duration()!==1/0?e.tech_.one("durationchange",(function i(){e.duration()===1/0?t():e.tech_.one("durationchange",i)})):t())})),this.masterPlaylistLoader_.on("error",(function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)})),this.masterPlaylistLoader_.on("mediachanging",(function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()})),this.masterPlaylistLoader_.on("mediachange",(function(){var t=e.masterPlaylistLoader_.media(),i=1.5*e.masterPlaylistLoader_.targetDuration*1e3;(0,s.isLowestEnabledRendition)(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=i,e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})})),this.masterPlaylistLoader_.on("playlistunchanged",(function(){var t=e.masterPlaylistLoader_.media();e.stuckAtPlaylistEnd_(t)&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),e.tech_.trigger("playliststuck"))})),this.masterPlaylistLoader_.on("renditiondisabled",(function(){e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})})),this.masterPlaylistLoader_.on("renditionenabled",(function(){e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})}))}},{key:"triggerPresenceUsage_",value:function(e,t){var i=e.mediaGroups||{},r=!0,n=Object.keys(i.AUDIO);for(var a in i.AUDIO)for(var s in i.AUDIO[a])i.AUDIO[a][s].uri||(r=!1);r&&this.tech_.trigger({type:"usage",name:"hls-demuxed"}),Object.keys(i.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"}),v.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"hls-aes"}),v.Playlist.isFmp4(t)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"}),n.length&&Object.keys(i.AUDIO[n[0]]).length>1&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function(){var e=this;this.mainSegmentLoader_.on("bandwidthupdate",(function(){var t=e.selectPlaylist(),i=e.masterPlaylistLoader_.media(),r=e.tech_.buffered(),n=r.length?r.end(r.length-1)-e.tech_.currentTime():0,a=e.bufferLowWaterLine();(!i.endList||e.duration()<p.default.MAX_BUFFER_LOW_WATER_LINE||t.attributes.BANDWIDTH<i.attributes.BANDWIDTH||n>=a)&&e.masterPlaylistLoader_.media(t),e.tech_.trigger("bandwidthupdate")})),this.mainSegmentLoader_.on("progress",(function(){e.trigger("progress")})),this.mainSegmentLoader_.on("error",(function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())})),this.mainSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.mainSegmentLoader_.on("timestampoffset",(function(){e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})})),this.audioSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.mainSegmentLoader_.on("ended",(function(){e.onEndOfStream()})),this.mainSegmentLoader_.on("earlyabort",(function(){e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120)})),this.mainSegmentLoader_.on("reseteverything",(function(){e.tech_.trigger("hls-reset")})),this.mainSegmentLoader_.on("segmenttimemapping",(function(t){e.tech_.trigger({type:"hls-segment-time-mapping",mapping:t.mapping})})),this.audioSegmentLoader_.on("ended",(function(){e.onEndOfStream()}))}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"fastQualityChange_",value:function(){var e=this.selectPlaylist();e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetLoader())}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_()&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}}},{key:"setupFirstPlay",value:function(){var e,t=this,i=this.masterPlaylistLoader_.media();if(!i||this.tech_.paused()||this.hasPlayed_())return!1;if(!i.endList){var r=(e=t.seekable()).length?d.default.browser.IE_VERSION&&"html5"===t.mode_&&0===t.tech_.readyState()?(t.tech_.one("loadedmetadata",(function(){t.trigger("firstplay"),t.tech_.setCurrentTime(e.end(0)),t.hasPlayed_=function(){return!0}})),{v:!1}):(t.trigger("firstplay"),void t.tech_.setCurrentTime(e.end(0))):{v:!1};if("object"==typeof r)return r.v}return this.hasPlayed_=function(){return!0},this.load(),!0}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(e){return d.default.log.warn("Failed to create Source Buffers",e),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,(function(e){}))}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function(){var e=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(e=e&&this.audioSegmentLoader_.ended_),e&&this.mediaSource.endOfStream()}},{key:"stuckAtPlaylistEnd_",value:function(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.mediaSource.duration);if(null===t)return!1;var i=v.Playlist.playlistEnd(e,t),r=this.tech_.currentTime(),n=this.tech_.buffered();if(!n.length)return i-r<=l.default.SAFE_TIME_DELTA;var a=n.end(n.length-1);return a-r<=l.default.SAFE_TIME_DELTA&&i-a<=l.default.SAFE_TIME_DELTA}},{key:"blacklistCurrentPlaylist",value:function(e,t){void 0===e&&(e={});var i,r=void 0;if(r=e.playlist||this.masterPlaylistLoader_.media(),t=t||e.blacklistDuration||this.blacklistDuration,!r){this.error=e;try{return this.mediaSource.endOfStream("network")}catch(e){return this.trigger("error")}}var n=1===this.masterPlaylistLoader_.master.playlists.filter(s.isEnabled).length;return n?(d.default.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the final playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(n)):(r.excludeUntil=Date.now()+1e3*t,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),i=this.selectPlaylist(),d.default.log.warn("Problem encountered with the current HLS playlist."+(e.message?" "+e.message:"")+" Switching to another playlist."),this.masterPlaylistLoader_.media(i))}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(e){var t=l.default.findRange(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length&&"flash"!==this.mode_?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:v.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var e=void 0,t=void 0;if(this.masterPlaylistLoader_){var i=this.masterPlaylistLoader_.media();if(i){var r=this.syncController_.getExpiredTime(i,this.mediaSource.duration);if(null!==r&&0!==(e=v.Playlist.seekable(i,r)).length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(i=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(r=this.syncController_.getExpiredTime(i,this.mediaSource.duration)))return;if(0===(t=v.Playlist.seekable(i,r)).length)return}t?t.start(0)>e.end(0)||e.start(0)>t.end(0)?this.seekable_=e:this.seekable_=d.default.createTimeRanges([[t.start(0)>e.start(0)?t.start(0):e.start(0),t.end(0)<e.end(0)?t.end(0):e.end(0)]]):this.seekable_=e,this.tech_.trigger("seekablechanged")}}}}},{key:"updateDuration",value:function(){var e=this,t=this.mediaSource.duration,i=v.Playlist.duration(this.masterPlaylistLoader_.media()),r=this.tech_.buffered(),n=function t(){e.mediaSource.duration=i,e.tech_.trigger("durationchange"),e.mediaSource.removeEventListener("sourceopen",t)};r.length>0&&(i=Math.max(i,r.end(r.length-1))),t!==i&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",n):n())}},{key:"dispose",value:function(){var e=this;this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach((function(t){var i=e.mediaTypes_[t].groups;for(var r in i)i[r].forEach((function(e){e.playlistLoader&&e.playlistLoader.dispose()}))})),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose()}},{key:"master",value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var e,t=this.masterPlaylistLoader_.media();if(t&&"open"===this.mediaSource.readyState){if((e=E(this.masterPlaylistLoader_.master,t)).length<1)return this.error="No compatible SourceBuffer configuration for the variant stream:"+t.resolvedUri,this.mediaSource.endOfStream("decode");this.mainSegmentLoader_.mimeType(e[0]),e[1]&&this.audioSegmentLoader_.mimeType(e[1]),this.excludeIncompatibleVariants_(t)}}},{key:"excludeIncompatibleVariants_",value:function(e){var t=this.masterPlaylistLoader_.master,i=2,r=null,n=void 0;e.attributes.CODECS&&(n=(0,y.parseCodecs)(e.attributes.CODECS),r=n.videoCodec,i=n.codecCount),t.playlists.forEach((function(e){var t={codecCount:2,videoCodec:null};if(e.attributes.CODECS){var n=e.attributes.CODECS;t=(0,y.parseCodecs)(n),window.MediaSource&&window.MediaSource.isTypeSupported&&!window.MediaSource.isTypeSupported('video/mp4; codecs="'+k(n)+'"')&&(e.excludeUntil=1/0)}t.codecCount!==i&&(e.excludeUntil=1/0),t.videoCodec!==r&&(e.excludeUntil=1/0)}))}},{key:"updateAdCues_",value:function(e){var t=0,i=this.seekable();i.length&&(t=i.start(0)),c.default.updateAdCues(e,this.cueTagsTrack_,t)}},{key:"goalBufferLength",value:function(){var e=this.tech_.currentTime(),t=p.default.GOAL_BUFFER_LENGTH,i=p.default.GOAL_BUFFER_LENGTH_RATE,r=Math.max(t,p.default.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*i,r)}},{key:"bufferLowWaterLine",value:function(){var e=this.tech_.currentTime(),t=p.default.BUFFER_LOW_WATER_LINE,i=p.default.BUFFER_LOW_WATER_LINE_RATE,r=Math.max(t,p.default.MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*i,r)}}]),t}(d.default.EventTarget);t.MasterPlaylistController=O},1309:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=(r=i(87))&&r.__esModule?r:{default:r},s=function(){},o=function(){function e(t,i){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(){r.sourceBuffer_=t.addSourceBuffer(i),r.onUpdateendCallback_=function(){var e=r.pendingCallback_;r.pendingCallback_=null,e&&e(),r.runCallback_()},r.sourceBuffer_.addEventListener("updateend",r.onUpdateendCallback_),r.runCallback_()};this.callbacks_=[],this.pendingCallback_=null,this.timestampOffset_=0,this.mediaSource=t,this.processedAppend_=!1,"closed"===t.readyState?t.addEventListener("sourceopen",n):n()}return n(e,[{key:"abort",value:function(e){var t=this;this.processedAppend_&&this.queueCallback_((function(){t.sourceBuffer_.abort()}),e)}},{key:"appendBuffer",value:function(e,t){var i=this;this.processedAppend_=!0,this.queueCallback_((function(){i.sourceBuffer_.appendBuffer(e)}),t)}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:a.default.createTimeRanges()}},{key:"remove",value:function(e,t){var i=this;this.processedAppend_&&this.queueCallback_((function(){i.sourceBuffer_.remove(e,t)}),s)}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||this.pendingCallback_}},{key:"timestampOffset",value:function(e){var t=this;return void 0!==e&&(this.queueCallback_((function(){t.sourceBuffer_.timestampOffset=e})),this.timestampOffset_=e),this.timestampOffset_}},{key:"queueCallback_",value:function(e,t){this.callbacks_.push([e.bind(this),t]),this.runCallback_()}},{key:"runCallback_",value:function(){var e=void 0;!this.updating()&&this.callbacks_.length&&(e=this.callbacks_.shift(),this.pendingCallback_=e[1],e[0]())}},{key:"dispose",value:function(){this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_),this.sourceBuffer_&&"open"===this.mediaSource.readyState&&this.sourceBuffer_.abort()}}]),e}();t.default=o,e.exports=t.default},1310:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=i(87))&&r.__esModule?r:{default:r},a=i(238),s={FAILURE:2,TIMEOUT:-101,ABORTED:-102};t.REQUEST_ERRORS=s;var o=function(e){var t,i,r={};return e.byterange&&(r.Range=(i=(t=e.byterange).offset+t.length-1,"bytes="+t.offset+"-"+i)),r},u=function(e){e.forEach((function(e){e.abort()}))},l=function(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:s.TIMEOUT,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:s.ABORTED,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:s.FAILURE,xhr:t}:null};t.mediaSegmentRequest=function(e,t,i,r,d,c){var f=[],h=function(e,t,i){var r=[],n=0;return function(s,o){if(s&&(u(e),r.push(s)),(n+=1)===e.length){if(o.endOfAllRequests=Date.now(),r.length>0){var l=function(e){return e.reduce((function(e,t){return t.code>e.code?t:e}))}(r);return i(l,o)}return o.encryptedBytes?function(e,t,i){e.addEventListener("message",(function r(n){if(n.data.source===t.requestId){e.removeEventListener("message",r);var a=n.data.decrypted;return t.bytes=new Uint8Array(a.bytes,a.byteOffset,a.byteLength),i(null,t)}})),e.postMessage((0,a.createTransferableMessage)({source:t.requestId,encrypted:t.encryptedBytes,key:t.key.bytes,iv:t.key.iv}),[t.encryptedBytes.buffer,t.key.bytes.buffer])}(t,o,i):i(null,o)}}}(f,i,c);if(r.key){var m=n.default.mergeOptions(t,{uri:r.key.resolvedUri,responseType:"arraybuffer"}),g=function(e,t){return function(i,r){var n=r.response,a=l(i,r);if(a)return t(a,e);if(16!==n.byteLength)return t({status:r.status,message:"Invalid HLS key at URL: "+r.uri,code:s.FAILURE,xhr:r},e);var o=new DataView(n);return e.key.bytes=new Uint32Array([o.getUint32(0),o.getUint32(4),o.getUint32(8),o.getUint32(12)]),t(null,e)}}(r,h),p=e(m,g);f.push(p)}if(r.map&&!r.map.bytes){var y=n.default.mergeOptions(t,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:o(r.map)}),_=function(e,t){return function(i,r){var n=r.response,a=l(i,r);return a?t(a,e):0===n.byteLength?t({status:r.status,message:"Empty HLS segment content at URL: "+r.uri,code:s.FAILURE,xhr:r},e):(e.map.bytes=new Uint8Array(r.response),t(null,e))}}(r,h),v=e(y,_);f.push(v)}var b=n.default.mergeOptions(t,{uri:r.resolvedUri,responseType:"arraybuffer",headers:o(r)}),T=function(e,t){return function(i,r){var n=r.response,a=l(i,r);return a?t(a,e):0===n.byteLength?t({status:r.status,message:"Empty HLS segment content at URL: "+r.uri,code:s.FAILURE,xhr:r},e):(e.stats=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}}(r),e.key?e.encryptedBytes=new Uint8Array(r.response):e.bytes=new Uint8Array(r.response),t(null,e))}}(r,h),S=e(b,T);return S.addEventListener("progress",function(e,t){return function(i){var r,a,s;return e.stats=n.default.mergeOptions(e.stats,(a=(r=i).target,(s={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-a.requestTime||0}).bytesReceived=r.loaded,s.bandwidth=Math.floor(s.bytesReceived/s.roundTripTime*8*1e3),s)),!e.stats.firstBytesReceivedAt&&e.stats.bytesReceived&&(e.stats.firstBytesReceivedAt=Date.now()),t(i,e)}}(r,d)),f.push(S),function(){return u(f)}}},1311:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),n=function(e,t,i){for(var r=!0;r;){var n=e,a=t,s=i;r=!1,null===n&&(n=Function.prototype);var o=Object.getOwnPropertyDescriptor(n,a);if(void 0!==o){if("value"in o)return o.value;var u=o.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=a,i=s,r=!0,o=l=void 0}};function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=a(i(636)),u=a(i(87)),l=a(i(75)),d=a(i(293)),c=i(238),f=new Uint8Array("\n\n".split("").map((function(e){return e.charCodeAt(0)}))),h=function(e){return String.fromCharCode.apply(null,e)},m=function(e){function t(e){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];s(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,i),this.mediaSource_=null,this.subtitlesTrack_=null}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"buffered_",value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return u.default.createTimeRanges();var e=this.subtitlesTrack_.cues,t=e[0].startTime,i=e[e.length-1].startTime;return u.default.createTimeRanges([[t,i]])}},{key:"initSegment",value:function(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];if(!e)return null;var i=(0,c.initSegmentId)(e),r=this.initSegments_[i];if(t&&!r&&e.bytes){var n=f.byteLength+e.bytes.byteLength,a=new Uint8Array(n);a.set(e.bytes),a.set(f,e.bytes.byteLength),this.initSegments_[i]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:a}}return r||e}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}},{key:"track",value:function(e){return void 0===e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}},{key:"remove",value:function(e,t){(0,d.default)(e,t,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function(){var e=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(t=this.skipEmptySegments_(t)){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline))return this.syncController_.one("timestampoffset",(function(){e.state="READY",e.paused()||e.monitorBuffer_()})),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(t)}}},{key:"skipEmptySegments_",value:function(e){for(;e&&e.segment.empty;)e=this.generateSegmentInfo_(e.playlist,e.mediaIndex+1,e.startOfSegment+e.duration,e.isSyncRequest);return e}},{key:"handleSegment_",value:function(){var e=this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state="APPENDING";var t,i=this.pendingSegment_,r=i.segment;if("function"!=typeof l.default.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var n=(t=function(){e.handleSegment_()},e.state="WAITING_ON_VTTJS",e.subtitlesTrack_.tech_.one("vttjsloaded",t),e.subtitlesTrack_.tech_.one("vttjserror",(function(){e.subtitlesTrack_.tech_.off("vttjsloaded",t),e.error({message:"Error loading vtt.js"}),e.state="READY",e.pause(),e.trigger("error")})),{v:void 0});if("object"==typeof n)return n.v}r.requested=!0;try{this.parseVTTCues_(i)}catch(e){return this.error({message:e.message}),this.state="READY",this.pause(),this.trigger("error")}if(this.updateTimeMapping_(i,this.syncController_.timelines[i.timeline],this.playlist_),i.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");i.byteLength=i.bytes.byteLength,this.mediaSecondsLoaded+=r.duration,i.cues.length&&this.remove(i.cues[0].endTime,i.cues[i.cues.length-1].endTime),i.cues.forEach((function(t){e.subtitlesTrack_.addCue(t)})),this.handleUpdateEnd_()}else this.state="READY"}},{key:"parseVTTCues_",value:function(e){var t=void 0,i=!1;"function"==typeof l.default.TextDecoder?t=new l.default.TextDecoder("utf8"):(t=l.default.WebVTT.StringDecoder(),i=!0);var r=new l.default.WebVTT.Parser(l.default,l.default.vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},r.oncue=e.cues.push.bind(e.cues),r.ontimestampmap=function(t){return e.timestampmap=t},r.onparsingerror=function(e){u.default.log.warn("Error encountered when parsing cues: "+e.message)},e.segment.map){var n=e.segment.map.bytes;i&&(n=h(n)),r.parse(n)}var a=e.bytes;i&&(a=h(a)),r.parse(a),r.flush()}},{key:"updateTimeMapping_",value:function(e,t,i){var r=e.segment;if(t)if(e.cues.length){var n=e.timestampmap,a=n.MPEGTS/9e4-n.LOCAL+t.mapping;if(e.cues.forEach((function(e){e.startTime+=a,e.endTime+=a})),!i.syncInfo){var s=e.cues[0].startTime,o=e.cues[e.cues.length-1].startTime;i.syncInfo={mediaSequence:i.mediaSequence+e.mediaIndex,time:Math.min(s,o-r.duration)}}}else r.empty=!0}}]),t}(o.default);t.default=m,e.exports=t.default},1312:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],r=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(i.push(s.value),!t||i.length!==t);r=!0);}catch(e){n=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw a}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=(r=i(75))&&r.__esModule?r:{default:r},s=function(e,t){for(var i=e.cues,r=0;r<i.length;r++){var n=i[r];if(t>=n.adStartTime&&t<=n.adEndTime)return n}return null};t.default={updateAdCues:function(e,t){var i=arguments.length<=2||void 0===arguments[2]?0:arguments[2];if(e.segments)for(var r=i,o=void 0,u=0;u<e.segments.length;u++){var l=e.segments[u];if(o||(o=s(t,r+l.duration/2)),o){if("cueIn"in l){o.endTime=r,o.adEndTime=r,r+=l.duration,o=null;continue}if(r<o.endTime){r+=l.duration;continue}o.endTime+=l.duration}else if("cueOut"in l&&((o=new a.default.VTTCue(r,r+l.duration,l.cueOut)).adStartTime=r,o.adEndTime=r+parseFloat(l.cueOut),t.addCue(o)),"cueOutCont"in l){var d=void 0,c=void 0,f=l.cueOutCont.split("/").map(parseFloat),h=n(f,2);d=h[0],c=h[1],(o=new a.default.VTTCue(r,r+l.duration,"")).adStartTime=r-d,o.adEndTime=o.adStartTime+c,t.addCue(o)}r+=l.duration}},findAdCue:s},e.exports=t.default},1313:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),n=function(e,t,i){for(var r=!0;r;){var n=e,a=t,s=i;r=!1,null===n&&(n=Function.prototype);var o=Object.getOwnPropertyDescriptor(n,a);if(void 0!==o){if("value"in o)return o.value;var u=o.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=a,i=s,r=!0,o=l=void 0}};function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=a(i(1314)),u=i(1315),l=i(192),d=a(i(87)),c=[{name:"VOD",run:function(e,t,i,r,n){return i!==1/0?{time:0,segmentIndex:0}:null}},{name:"ProgramDateTime",run:function(e,t,i,r,n){return e.datetimeToDisplayTime&&t.dateTimeObject?{time:t.dateTimeObject.getTime()/1e3+e.datetimeToDisplayTime,segmentIndex:0}:null}},{name:"Segment",run:function(e,t,i,r,n){var a=t.segments||[],s=null,o=null;n=n||0;for(var u=0;u<a.length;u++){var l=a[u];if(l.timeline===r&&void 0!==l.start){var d=Math.abs(n-l.start);if(null!==o&&o<d)break;(!s||null===o||o>=d)&&(o=d,s={time:l.start,segmentIndex:u})}}return s}},{name:"Discontinuity",run:function(e,t,i,r,n){var a=null;if(n=n||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var s=null,o=0;o<t.discontinuityStarts.length;o++){var u=t.discontinuityStarts[o],l=t.discontinuitySequence+o+1,d=e.discontinuities[l];if(d){var c=Math.abs(n-d.time);if(null!==s&&s<c)break;(!a||null===s||s>=c)&&(s=c,a={time:d.time,segmentIndex:u})}}return a}},{name:"Playlist",run:function(e,t,i,r,n){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence}:null}}];t.syncPointStrategies=c;var f=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];s(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.inspectCache_=void 0,this.timelines=[],this.discontinuities=[],this.datetimeToDisplayTime=null,e.debug&&(this.logger_=d.default.log.bind(d.default,"sync-controller ->"))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"getSyncPoint",value:function(e,t,i,r){var n=this.runStrategies_(e,t,i,r);return n.length?this.selectSyncPoint_(n,{key:"time",value:r}):null}},{key:"getExpiredTime",value:function(e,t){if(!e||!e.segments)return null;var i=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!i.length)return null;var r=this.selectSyncPoint_(i,{key:"segmentIndex",value:0});return r.segmentIndex>0&&(r.time*=-1),Math.abs(r.time+(0,l.sumDurations)(e,r.segmentIndex,0))}},{key:"runStrategies_",value:function(e,t,i,r){for(var n=[],a=0;a<c.length;a++){var s=c[a],o=s.run(this,e,t,i,r);o&&(o.strategy=s.name,n.push({strategy:s.name,syncPoint:o}),this.logger_("syncPoint found via <"+s.name+">:",o))}return n}},{key:"selectSyncPoint_",value:function(e,t){for(var i=e[0].syncPoint,r=Math.abs(e[0].syncPoint[t.key]-t.value),n=e[0].strategy,a=1;a<e.length;a++){var s=Math.abs(e[a].syncPoint[t.key]-t.value);s<r&&(r=s,i=e[a].syncPoint,n=e[a].strategy)}return this.logger_("syncPoint with strategy <"+n+"> chosen: ",i),i}},{key:"saveExpiredSegmentInfo",value:function(e,t){for(var i=t.mediaSequence-e.mediaSequence-1;i>=0;i--){var r=e.segments[i];if(r&&void 0!==r.start){t.syncInfo={mediaSequence:e.mediaSequence+i,time:r.start},this.logger_("playlist sync:",t.syncInfo),this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(e){if(!this.datetimeToDisplayTime&&e.dateTimeObject){var t=e.dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-t}}},{key:"reset",value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",value:function(e){var t,i=e.segment,r=e.playlist;return(t=i.map?this.probeMp4Segment_(e):this.probeTsSegment_(e))&&this.calculateSegmentTimeMapping_(e,t)&&(this.saveDiscontinuitySyncInfo_(e),r.syncInfo||(r.syncInfo={mediaSequence:r.mediaSequence+e.mediaIndex,time:i.start})),t}},{key:"probeMp4Segment_",value:function(e){var t=e.segment,i=o.default.timescale(t.map.bytes),r=o.default.startTime(i,e.bytes);return null!==e.timestampOffset&&(e.timestampOffset-=r),{start:r,end:r+t.duration}}},{key:"probeTsSegment_",value:function(e){var t=(0,u.inspect)(e.bytes,this.inspectCache_),i=void 0,r=void 0;return t?(t.video&&2===t.video.length?(this.inspectCache_=t.video[1].dts,i=t.video[0].dtsTime,r=t.video[1].dtsTime):t.audio&&2===t.audio.length&&(this.inspectCache_=t.audio[1].dts,i=t.audio[0].dtsTime,r=t.audio[1].dtsTime),{start:i,end:r,containsVideo:t.video&&2===t.video.length,containsAudio:t.audio&&2===t.audio.length}):null}},{key:"timestampOffsetForTimeline",value:function(e){return void 0===this.timelines[e]?null:this.timelines[e].time}},{key:"mappingForTimeline",value:function(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping}},{key:"calculateSegmentTimeMapping_",value:function(e,t){var i=e.segment,r=this.timelines[e.timeline];if(null!==e.timestampOffset)this.logger_("tsO:",e.timestampOffset),r={time:e.startOfSegment,mapping:e.startOfSegment-t.start},this.timelines[e.timeline]=r,this.trigger("timestampoffset"),i.start=e.startOfSegment,i.end=t.end+r.mapping;else{if(!r)return!1;i.start=t.start+r.mapping,i.end=t.end+r.mapping}return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(e){var t=e.playlist,i=e.segment;if(i.discontinuity)this.discontinuities[i.timeline]={time:i.start,accuracy:0};else if(t.discontinuityStarts.length)for(var r=0;r<t.discontinuityStarts.length;r++){var n,a=t.discontinuityStarts[r],s=t.discontinuitySequence+r+1,o=a-e.mediaIndex,u=Math.abs(o);if(!this.discontinuities[s]||this.discontinuities[s].accuracy>u)n=o<0?i.start-(0,l.sumDurations)(t,e.mediaIndex,a):i.end+(0,l.sumDurations)(t,e.mediaIndex+1,a),this.discontinuities[s]={time:n,accuracy:u}}}},{key:"logger_",value:function(){}}]),t}(d.default.EventTarget);t.default=f},1320:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(i(87)),a=r(i(415)),s=function(){},o=function(e){var t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},u=function(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)};t.stopLoaders=u;var l=function(e,t){t.activePlaylistLoader=e,e.load()};t.startLoaders=l;var d=function(e,t){return function(){var i=t.segmentLoaders,r=i[e],n=i.main,a=t.mediaTypes[e],s=a.activeTrack(),o=a.activeGroup(s),d=a.activePlaylistLoader;u(r,a),o&&(o.playlistLoader?(r.resyncLoader(),l(o.playlistLoader,a)):d&&n.resetEverything())}};t.onGroupChanged=d;var c=function(e,t){return function(){var i=t.segmentLoaders,r=i[e],n=i.main,a=t.mediaTypes[e],s=a.activeTrack(),o=a.activeGroup(s),d=a.activePlaylistLoader;u(r,a),o&&(o.playlistLoader?d!==o.playlistLoader?(r.track&&r.track(s),r.resetEverything(),l(o.playlistLoader,a)):l(o.playlistLoader,a):n.resetEverything())}};t.onTrackChanged=c;var f={AUDIO:function(e,t){return function(){var i=t.segmentLoaders[e],r=t.mediaTypes[e],a=t.blacklistCurrentPlaylist;u(i,r);var s=r.activeTrack(),o=r.activeGroup(),l=(o.filter((function(e){return e.default}))[0]||o[0]).id,d=r.tracks[l];if(s!==d){for(var c in n.default.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),r.tracks)r.tracks[c].enabled=r.tracks[c]===d;r.onTrackChanged()}else a({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(e,t){return function(){var i=t.segmentLoaders[e],r=t.mediaTypes[e];n.default.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),u(i,r);var a=r.activeTrack();a&&(a.mode="disabled"),r.onTrackChanged()}}};t.onError=f;var h={AUDIO:function(e,t,i){if(t){var r=i.tech,n=i.requestOptions,a=i.segmentLoaders[e];t.on("loadedmetadata",(function(){var e=t.media();a.playlist(e,n),(!r.paused()||e.endList&&"none"!==r.preload())&&a.load()})),t.on("loadedplaylist",(function(){a.playlist(t.media(),n),r.paused()||a.load()})),t.on("error",f[e](e,i))}},SUBTITLES:function(e,t,i){var r=i.tech,n=i.requestOptions,a=i.segmentLoaders[e],s=i.mediaTypes[e];t.on("loadedmetadata",(function(){var e=t.media();a.playlist(e,n),a.track(s.activeTrack()),(!r.paused()||e.endList&&"none"!==r.preload())&&a.load()})),t.on("loadedplaylist",(function(){a.playlist(t.media(),n),r.paused()||a.load()})),t.on("error",f[e](e,i))}};t.setupListeners=h;var m={AUDIO:function(e,t){var i=t.mode,r=t.hls,s=t.segmentLoaders[e],u=t.requestOptions,l=t.master.mediaGroups,d=t.mediaTypes[e],c=d.groups,m=d.tracks;for(var g in l[e]&&0!==Object.keys(l[e]).length&&"html5"===i||(l[e]={main:{default:{default:!0}}}),l[e])for(var p in c[g]||(c[g]=[]),l[e][g]){var y,_=l[e][g][p];if(y=_.resolvedUri?new a.default(_.resolvedUri,r,u):null,_=n.default.mergeOptions({id:p,playlistLoader:y},_),h[e](e,_.playlistLoader,t),c[g].push(_),void 0===m[p]){var v=new n.default.AudioTrack({id:p,kind:o(_),enabled:!1,language:_.language,default:_.default,label:p});m[p]=v}}s.on("error",f[e](e,t))},SUBTITLES:function(e,t){var i=t.tech,r=t.hls,s=t.segmentLoaders[e],o=t.requestOptions,u=t.master.mediaGroups,l=t.mediaTypes[e],d=l.groups,c=l.tracks;for(var m in u[e])for(var g in d[m]||(d[m]=[]),u[e][m])if(!u[e][m][g].forced){var p=u[e][m][g];if(p=n.default.mergeOptions({id:g,playlistLoader:new a.default(p.resolvedUri,r,o)},p),h[e](e,p.playlistLoader,t),d[m].push(p),void 0===c[g]){var y=i.addRemoteTextTrack({id:g,kind:"subtitles",enabled:!1,language:p.language,label:g},!1).track;c[g]=y}}s.on("error",f[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var i=t.tech,r=t.master.mediaGroups,a=t.mediaTypes[e],s=a.groups,o=a.tracks;for(var u in r[e])for(var l in s[u]||(s[u]=[]),r[e][u]){var d=r[e][u][l];if(d.instreamId.match(/CC\d/)&&(s[u].push(n.default.mergeOptions({id:l},d)),void 0===o[l])){var c=i.addRemoteTextTrack({id:d.instreamId,kind:"captions",enabled:!1,language:d.language,label:l},!1).track;o[l]=c}}}};t.initialize=m;var g=function(e,t){return function(i){var r=t.masterPlaylistLoader,n=t.mediaTypes[e].groups,a=r.media();if(!a)return null;var s=null;return a.attributes[e]&&(s=n[a.attributes[e]]),s=s||n.main,void 0===i?s:null===i?null:s.filter((function(e){return e.id===i.id}))[0]||null}};t.activeGroup=g;var p={AUDIO:function(e,t){return function(){var i=t.mediaTypes[e].tracks;for(var r in i)if(i[r].enabled)return i[r];return null}},SUBTITLES:function(e,t){return function(){var i=t.mediaTypes[e].tracks;for(var r in i)if("showing"===i[r].mode)return i[r];return null}}};t.activeTrack=p,t.setupMediaGroups=function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(t){m[t](t,e)}));var t=e.mediaTypes,i=e.masterPlaylistLoader,r=e.tech,n=e.hls;["AUDIO","SUBTITLES"].forEach((function(i){t[i].activeGroup=g(i,e),t[i].activeTrack=p[i](i,e),t[i].onGroupChanged=d(i,e),t[i].onTrackChanged=c(i,e)}));var a=t.AUDIO.activeGroup(),s=(a.filter((function(e){return e.default}))[0]||a[0]).id;t.AUDIO.tracks[s].enabled=!0,t.AUDIO.onTrackChanged(),i.on("mediachange",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return t[e].onGroupChanged()}))}));var o=function(){t.AUDIO.onTrackChanged(),r.trigger({type:"usage",name:"hls-audio-change"})};for(var u in r.audioTracks().addEventListener("change",o),r.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),n.on("dispose",(function(){r.audioTracks().removeEventListener("change",o),r.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)})),r.clearTracks("audio"),t.AUDIO.tracks)r.audioTracks().addTrack(t.AUDIO.tracks[u])},t.createMediaTypes=function(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(t){e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:s,activeTrack:s,onGroupChanged:s,onTrackChanged:s}})),e}},1321:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(192),n=function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var a,s,o,u=t.masterPlaylistController_.fastQualityChange_.bind(t.masterPlaylistController_);if(i.attributes.RESOLUTION){var l=i.attributes.RESOLUTION;this.width=l.width,this.height=l.height}this.bandwidth=i.attributes.BANDWIDTH,this.id=n,this.enabled=(a=t.playlists,s=i.uri,o=u,function(e){var t=a.master.playlists[s],i=(0,r.isIncompatible)(t),n=(0,r.isEnabled)(t);return void 0===e?n:(e?delete t.disabled:t.disabled=!0,e===n||i||(o(),e?a.trigger("renditionenabled"):a.trigger("renditiondisabled")),e)})};t.default=function(e){var t=e.playlists;e.representations=function(){return t.master.playlists.filter((function(e){return!(0,r.isIncompatible)(e)})).map((function(t,i){return new n(e,t,t.uri)}))}},e.exports=t.default},1322:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();function n(e){return e&&e.__esModule?e:{default:e}}var a=n(i(75)),s=n(i(422)),o=n(i(87)),u=["seeking","seeked","pause","playing","error"],l=function(){function e(t){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tech_=t.tech,this.seekable=t.seekable,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,t.debug&&(this.logger_=o.default.log.bind(o.default,"playback-watcher ->")),this.logger_("initialize");var r=function(){return i.monitorCurrentTime_()},n=function(){return i.techWaiting_()},s=function(){return i.cancelTimer_()},l=function(){return i.fixesBadSeeks_()};this.tech_.on("seekablechanged",l),this.tech_.on("waiting",n),this.tech_.on(u,s),this.tech_.on("canplay",r),this.dispose=function(){i.logger_("dispose"),i.tech_.off("seekablechanged",l),i.tech_.off("waiting",n),i.tech_.off(u,s),i.tech_.off("canplay",r),i.checkCurrentTimeTimeout_&&a.default.clearTimeout(i.checkCurrentTimeTimeout_),i.cancelTimer_()}}return r(e,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&a.default.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=a.default.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+s.default.SAFE_TIME_DELTA>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null}},{key:"fixesBadSeeks_",value:function(){var e=this.tech_.seeking(),t=this.seekable(),i=this.tech_.currentTime(),r=void 0;return e&&this.afterSeekableWindow_(t,i)&&(r=t.end(t.length-1)),e&&this.beforeSeekableWindow_(t,i)&&(r=t.start(0)+s.default.SAFE_TIME_DELTA),void 0!==r&&(this.logger_("Trying to seek outside of seekable at time "+i+" with seekable range "+s.default.printableRange(t)+". Seeking to "+r+"."),this.tech_.setCurrentTime(r),!0)}},{key:"waiting_",value:function(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),t=this.tech_.buffered(),i=s.default.findRange(t,e);return i.length&&e+3<=i.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+i.start(0)+" -> "+i.end(0)+"]. Attempting to resume playback by seeking to the current time."),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}}},{key:"techWaiting_",value:function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var i=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+i),this.cancelTimer_(),this.tech_.setCurrentTime(i),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var r=this.tech_.buffered(),n=s.default.findNextRange(r,t);if(this.videoUnderflow_(n,r,t))return this.cancelTimer_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;if(n.length>0){var a=n.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+a+", seeking to "+n.start(0)),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*a,t),!0}return!1}},{key:"afterSeekableWindow_",value:function(e,t){return!!e.length&&t>e.end(e.length-1)+s.default.SAFE_TIME_DELTA}},{key:"beforeSeekableWindow_",value:function(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-s.default.SAFE_TIME_DELTA)}},{key:"videoUnderflow_",value:function(e,t,i){if(0===e.length){var r=this.gapFromVideoUnderflow_(t,i);if(r)return this.logger_("Encountered a gap in video from "+r.start+" to "+r.end+". Seeking to current time "+i),!0}return!1}},{key:"skipTheGap_",value:function(e){var t=this.tech_.buffered(),i=this.tech_.currentTime(),r=s.default.findNextRange(t,i);this.cancelTimer_(),0!==r.length&&i===e&&(this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",e,"nextRange start:",r.start(0)),this.tech_.setCurrentTime(r.start(0)+s.default.TIME_FUDGE_FACTOR),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(e,t){for(var i=s.default.findGaps(e),r=0;r<i.length;r++){var n=i.start(r),a=i.end(r);if(t-n<4&&t-n>2)return{start:n,end:a}}return null}},{key:"logger_",value:function(){}}]),e}();t.default=l,e.exports=t.default},1323:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=i(87))&&r.__esModule?r:{default:r},a={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_)}},s=function e(t,i){var r=0,s=0,o=n.default.mergeOptions(a,i);t.ready((function(){t.trigger({type:"usage",name:"hls-error-reload-initialized"})}));var u=function(){s&&t.currentTime(s)},l=function(e){null!=e&&(s=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",u),t.src(e),t.trigger({type:"usage",name:"hls-error-reload"}),t.play())},d=function(){if(Date.now()-r<1e3*o.errorInterval)t.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(o.getSource&&"function"==typeof o.getSource)return r=Date.now(),o.getSource.call(t,l);n.default.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},c=function e(){t.off("loadedmetadata",u),t.off("error",d),t.off("dispose",e)};t.on("error",d),t.on("dispose",c),t.reloadSourceOnError=function(i){c(),e(t,i)}};t.default=function(e){s(this,e)},e.exports=t.default},192:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=i(87),a=(r=i(75))&&r.__esModule?r:{default:r},s=function(e,t,i){var r,n;return void 0===t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence?0:(r=function(e,t){var i=0,r=t-e.mediaSequence,n=e.segments[r];if(n){if(void 0!==n.start)return{result:n.start,precise:!0};if(void 0!==n.end)return{result:n.end-n.duration,precise:!0}}for(;r--;){if(void 0!==(n=e.segments[r]).end)return{result:i+n.end,precise:!0};if(i+=n.duration,void 0!==n.start)return{result:i+n.start,precise:!0}}return{result:i,precise:!1}}(e,t),r.precise?r.result:(n=function(e,t){for(var i=0,r=void 0,n=t-e.mediaSequence;n<e.segments.length;n++){if(void 0!==(r=e.segments[n]).start)return{result:r.start-i,precise:!0};if(i+=r.duration,void 0!==r.end)return{result:r.end-i,precise:!0}}return{result:-1,precise:!1}}(e,t),n.precise?n.result:r.result+i))},o=function(e,t,i){if(!e)return 0;if("number"!=typeof i&&(i=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return a.default.Infinity}return s(e,t,i)};t.duration=o;var u=function(e,t,i){var r=0;if(t>i){var n=[i,t];t=n[0],i=n[1]}if(t<0){for(var a=t;a<Math.min(0,i);a++)r+=e.targetDuration;t=0}for(a=t;a<i;a++)r+=e.segments[a].duration;return r};t.sumDurations=u;var l=function(e){if(!e.segments.length)return 0;for(var t=e.segments.length-1,i=e.segments[t].duration||e.targetDuration,r=i+2*e.targetDuration;t--&&!((i+=e.segments[t].duration)>=r););return Math.max(0,t)};t.safeLiveIndex=l;var d=function(e,t,i){if(!e||!e.segments)return null;if(e.endList)return o(e);if(null===t)return null;t=t||0;var r=i?l(e):e.segments.length;return s(e,e.mediaSequence+r,t)};t.playlistEnd=d;var c=function(e,t){var i=t||0,r=d(e,t,!0);return null===r?(0,n.createTimeRange)():(0,n.createTimeRange)(i,r)};t.seekable=c;var f=function(e){return e-Math.floor(e)==0},h=function(e,t){if(f(t))return t+.1*e;for(var i=t.toString().split(".")[1].length,r=1;r<=i;r++){var n=Math.pow(10,r),a=t*n;if(f(a)||r===i)return(a+e)/n}},m=h.bind(null,1),g=h.bind(null,-1),p=function(e,t,i,r){var n=void 0,a=void 0,s=e.segments.length,o=t-r;if(o<0){if(i>0)for(n=i-1;n>=0;n--)if(a=e.segments[n],(o+=g(a.duration))>0)return{mediaIndex:n,startTime:r-u(e,i,n)};return{mediaIndex:0,startTime:t}}if(i<0){for(n=i;n<0;n++)if((o-=e.targetDuration)<0)return{mediaIndex:0,startTime:t};i=0}for(n=i;n<s;n++)if(a=e.segments[n],(o-=m(a.duration))<0)return{mediaIndex:n,startTime:r+u(e,i,n)};return{mediaIndex:s-1,startTime:t}};t.getMediaInfoForTime=p;var y=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()};t.isBlacklisted=y;var _=function(e){return e.excludeUntil&&e.excludeUntil===1/0};t.isIncompatible=_;var v=function(e){var t=y(e);return!e.disabled&&!t};t.isEnabled=v;var b=function(e){return e.disabled};t.isDisabled=b;var T=function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1};t.isAes=T;var S=function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].map)return!0;return!1};t.isFmp4=S;var k=function(e,t){return t.attributes&&t.attributes[e]};t.hasAttribute=k;var L=function(e,t,i){var r=arguments.length<=3||void 0===arguments[3]?0:arguments[3];if(!k("BANDWIDTH",i))return NaN;var n=e*i.attributes.BANDWIDTH;return(n-8*r)/t};t.estimateSegmentRequestTime=L;var E=function(e,t){if(1===e.playlists.length)return!0;var i=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter((function(e){return!!v(e)&&(e.attributes.BANDWIDTH||0)<i})).length};t.isLowestEnabledRendition=E,t.default={duration:o,seekable:c,safeLiveIndex:l,getMediaInfoForTime:p,isEnabled:v,isDisabled:b,isBlacklisted:y,isIncompatible:_,playlistEnd:d,isAes:T,isFmp4:S,hasAttribute:k,estimateSegmentRequestTime:L,isLowestEnabledRendition:E}},238:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){return e.start(t)+"-"+e.end(t)},n=function(e,t){var i=e.toString(16);return"00".substring(0,2-i.length)+i+(t%2?" ":"")},a=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},s={hexDump:function(e){for(var t=Array.prototype.slice.call(e),i=16,r="",s=0;s<t.length/i;s++)r+=t.slice(s*i,s*i+i).map(n).join("")+" "+t.slice(s*i,s*i+i).map(a).join("")+"\n";return r},tagDump:function(e){return s.hexDump(e.bytes)},textRanges:function(e){var t="",i=void 0;for(i=0;i<e.length;i++)t+=r(e,i)+" ";return t},createTransferableMessage:function(e){var t={};return Object.keys(e).forEach((function(i){var r=e[i];ArrayBuffer.isView(r)?t[i]={bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:t[i]=r})),t},initSegmentId:function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")}};t.default=s,e.exports=t.default},295:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},e.exports=t.default},415:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();function n(e){return e&&e.__esModule?e:{default:e}}var a=n(i(1264)),s=i(87),o=n(i(622)),u=n(i(75)),l=function(e,t,i){var r=t.slice();i=i||0;for(var n=Math.min(e.length,t.length+i),a=i;a<n;a++)r[a-i]=(0,s.mergeOptions)(e[a],r[a-i]);return r};t.updateSegments=l;var d=function(e,t){e.resolvedUri||(e.resolvedUri=(0,a.default)(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=(0,a.default)(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=(0,a.default)(t,e.map.uri))};t.resolveSegmentUris=d;var c=function(e,t){var i=(0,s.mergeOptions)(e,{}),r=i.playlists.filter((function(e){return e.uri===t.uri}))[0];if(!r)return null;if(r.segments&&t.segments&&r.segments.length===t.segments.length&&r.mediaSequence===t.mediaSequence)return null;var n=(0,s.mergeOptions)(r,t);r.segments&&(n.segments=l(r.segments,t.segments,t.mediaSequence-r.mediaSequence)),n.segments.forEach((function(e){d(e,n.resolvedUri)}));for(var a=0;a<i.playlists.length;a++)i.playlists[a].uri===t.uri&&(i.playlists[a]=n);return i.playlists[t.uri]=n,i};t.updateMaster=c;var f=function(e){for(var t=e.playlists.length;t--;){var i=e.playlists[t];e.playlists[i.uri]=i,i.resolvedUri=(0,a.default)(e.uri,i.uri),i.attributes||(i.attributes={},s.log.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}};t.setupMediaPlaylists=f;var h=function(e){["AUDIO","SUBTITLES"].forEach((function(t){for(var i in e.mediaGroups[t])for(var r in e.mediaGroups[t][i]){var n=e.mediaGroups[t][i][r];n.uri&&(n.resolvedUri=(0,a.default)(e.uri,n.uri))}}))};t.resolveMediaGroupUris=h;var m=function(e,t){var i=e.segments[e.segments.length-1];return t&&i&&i.duration?1e3*i.duration:500*(e.targetDuration||10)};t.refreshDelay=m;var g=function(e){function t(e,i,r){var n=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,i){for(var r=!0;r;){var n=e,a=t,s=i;r=!1,null===n&&(n=Function.prototype);var o=Object.getOwnPropertyDescriptor(n,a);if(void 0!==o){if("value"in o)return o.value;var u=o.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=a,i=s,r=!0,o=l=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),r=r||{},this.srcUrl=e,this.hls_=i,this.withCredentials=!!r.withCredentials,this.handleManifestRedirects=!!r.handleManifestRedirects,!this.srcUrl)throw new Error("A non-empty playlist URL is required");this.state="HAVE_NOTHING",this.on("mediaupdatetimeout",(function(){"HAVE_METADATA"===n.state&&(n.state="HAVE_CURRENT_METADATA",n.request=n.hls_.xhr({uri:(0,a.default)(n.master.uri,n.media().uri),withCredentials:n.withCredentials},(function(e,t){if(n.request)return e?n.playlistRequestError(n.request,n.media().uri,"HAVE_METADATA"):void n.haveMetadata(n.request,n.media().uri)})))}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"playlistRequestError",value:function(e,t,i){this.request=null,i&&(this.state=i),this.error={playlist:this.master.playlists[t],status:e.status,message:"HLS playlist request error at URL: "+t,responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")}},{key:"haveMetadata",value:function(e,t){var i=this;this.request=null,this.state="HAVE_METADATA";var r=new o.default.Parser;r.push(e.responseText),r.end(),r.manifest.uri=t,r.manifest.attributes=r.manifest.attributes||{};var n=c(this.master,r.manifest);this.targetDuration=r.manifest.targetDuration,n?(this.master=n,this.media_=this.master.playlists[r.manifest.uri]):this.trigger("playlistunchanged"),this.media().endList||(u.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=u.default.setTimeout((function(){i.trigger("mediaupdatetimeout")}),m(this.media(),!!n))),this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.stopRequest(),u.default.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:"media",value:function(e){var t=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var i=this.state;if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}var r=!this.media_||e.uri!==this.media_.uri;if(this.master.playlists[e.uri].endList)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(r&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(r){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.hls_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},(function(r,n){if(t.request){if(e.resolvedUri=t.resolveManifestRedirect(e.resolvedUri,n),r)return t.playlistRequestError(t.request,e.uri,i);t.haveMetadata(n,e.uri),"HAVE_MASTER"===i?t.trigger("loadedmetadata"):t.trigger("mediachange")}}))}}},{key:"resolveManifestRedirect",value:function(e,t){return this.handleManifestRedirects&&t.responseURL&&e!==t.responseURL?t.responseURL:e}},{key:"pause",value:function(){this.stopRequest(),u.default.clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function(e){var t=this;u.default.clearTimeout(this.mediaUpdateTimeout);var i=this.media();if(e){var r=i?i.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=u.default.setTimeout((function(){return t.load()}),r)}else this.started?i&&!i.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}},{key:"start",value:function(){var e=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},(function(t,i){if(e.request){if(e.request=null,t)return e.error={status:i.status,message:"HLS playlist request error at URL: "+e.srcUrl,responseText:i.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");var r=new o.default.Parser;return r.push(i.responseText),r.end(),e.state="HAVE_MASTER",e.srcUrl=e.resolveManifestRedirect(e.srcUrl,i),r.manifest.uri=e.srcUrl,r.manifest.playlists?(e.master=r.manifest,f(e.master),h(e.master),e.trigger("loadedplaylist"),void(e.request||e.media(r.manifest.playlists[0]))):(e.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:u.default.location.href,playlists:[{uri:e.srcUrl,resolvedUri:e.srcUrl,attributes:{}}]},e.master.playlists[e.srcUrl]=e.master.playlists[0],e.haveMetadata(i,e.srcUrl),e.trigger("loadedmetadata"))}}))}}]),t}(s.EventTarget);t.default=g},422:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],r=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(i.push(s.value),!t||i.length!==t);r=!0);}catch(e){n=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw a}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=(r=i(87))&&r.__esModule?r:{default:r},s=1/30,o=function(e,t){var i=[],r=void 0;if(e&&e.length)for(r=0;r<e.length;r++)t(e.start(r),e.end(r))&&i.push([e.start(r),e.end(r)]);return a.default.createTimeRanges(i)},u=function(e,t){var i=null,r=null,n=0,s=[],o=[];if(!(e&&e.length&&t&&t.length))return a.default.createTimeRange();for(var u=e.length;u--;)s.push({time:e.start(u),type:"start"}),s.push({time:e.end(u),type:"end"});for(u=t.length;u--;)s.push({time:t.start(u),type:"start"}),s.push({time:t.end(u),type:"end"});for(s.sort((function(e,t){return e.time-t.time})),u=0;u<s.length;u++)"start"===s[u].type?2==++n&&(i=s[u].time):"end"===s[u].type&&1==--n&&(r=s[u].time),null!==i&&null!==r&&(o.push([i,r]),i=null,r=null);return a.default.createTimeRanges(o)};t.default={findRange:function(e,t){return o(e,(function(e,i){return e-s<=t&&i+s>=t}))},findNextRange:function(e,t){return o(e,(function(e){return e-s>=t}))},findGaps:function(e){if(e.length<2)return a.default.createTimeRanges();for(var t=[],i=1;i<e.length;i++){var r=e.end(i-1),n=e.start(i);t.push([r,n])}return a.default.createTimeRanges(t)},findSoleUncommonTimeRangesEnd:function(e,t){var i=void 0,r=void 0,n=void 0,a=[],s=[],o=function(e){return e[0]<=n&&e[1]>=n};if(e)for(i=0;i<e.length;i++)r=e.start(i),n=e.end(i),s.push([r,n]);if(t)for(i=0;i<t.length;i++)r=t.start(i),n=t.end(i),s.some(o)||a.push(n);return 1!==a.length?null:a[0]},getSegmentBufferedPercent:function(e,t,i,r){var s,o,l,d,c,f=e+t,h=a.default.createTimeRanges([[e,f]]),m=a.default.createTimeRanges([[(s=e,o=[i,f],l=n(o,2),d=l[0],c=l[1],Math.min(Math.max(d,s),c)),f]]);if(m.start(0)===m.end(0))return 0;var g=function(e,t,i,r){for(var n=t.end(0)-t.start(0),a=n-(e.end(0)-e.start(0)),s=u(e,r),o=u(t,r),l=0,d=0,c=s.length;c--;)l+=s.end(c)-s.start(c),s.start(c)===i&&(l+=a);for(c=o.length;c--;)d+=o.end(c)-o.start(c);return Math.max(l,d)/n*100}(m,h,i,r);return isNaN(g)||g===1/0||g===-1/0?0:g},TIME_FUDGE_FACTOR:s,SAFE_TIME_DELTA:.1,printableRange:function(e){var t=[];if(!e||!e.length)return"";for(var i=0;i<e.length;i++)t.push(e.start(i)+" => "+e.end(i));return t.join(", ")},timeUntilRebuffer:function(e,t){var i=arguments.length<=2||void 0===arguments[2]?1:arguments[2],r=e.length?e.end(e.length-1):0;return(r-t)/i}},e.exports=t.default},636:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),n=function(e,t,i){for(var r=!0;r;){var n=e,a=t,s=i;r=!1,null===n&&(n=Function.prototype);var o=Object.getOwnPropertyDescriptor(n,a);if(void 0!==o){if("value"in o)return o.value;var u=o.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=a,i=s,r=!0,o=l=void 0}};function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=a(i(192)),u=a(i(87)),l=a(i(1309)),d=a(i(295)),c=a(i(75)),f=a(i(293)),h=i(238),m=i(1310),g=i(422),p=i(637),y=function(e,t,i){if(!e||!t)return!1;var r=i===e.segments.length;return e.endList&&"open"===t.readyState&&r},_=function(e){return"number"==typeof e&&isFinite(e)},v=function(e,t,i){return"main"===e&&t&&i?i.containsAudio||i.containsVideo?t.containsVideo&&!i.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.containsVideo&&i.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null};t.illegalMediaSwitch=v;var b=function(e,t,i){var r;return r=e.length&&e.start(0)>0&&e.start(0)<t?e.start(0):t-30,Math.min(r,t-i)};t.safeBackBufferTrimTime=b;var T=function(e){function t(e){var i=this,r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(s(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),!e)throw new TypeError("Initialization settings are required");if("function"!=typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.state="INIT",this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.hls_=e.hls,this.loaderType_=e.loaderType,this.startingMedia_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.pendingSegment_=null,this.mimeType_=null,this.sourceUpdater_=null,this.xhrOptions_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.syncController_.on("syncinfoupdate",(function(){return i.trigger("syncinfoupdate")})),this.mediaSource_.addEventListener("sourceopen",(function(){return i.ended_=!1})),this.fetchAtBuffer_=!1,r.debug&&(this.logger_=u.default.log.bind(u.default,"segment-loader",this.loaderType_,"->"))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"resetStats_",value:function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0}},{key:"dispose",value:function(){this.state="DISPOSED",this.pause(),this.abort_(),this.sourceUpdater_&&this.sourceUpdater_.dispose(),this.resetStats_()}},{key:"abort",value:function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}},{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null}},{key:"error",value:function(e){return void 0!==e&&(this.error_=e),this.pendingSegment_=null,this.error_}},{key:"endOfStream",value:function(){this.ended_=!0,this.pause(),this.trigger("ended")}},{key:"buffered_",value:function(){return this.sourceUpdater_?this.sourceUpdater_.buffered():u.default.createTimeRanges()}},{key:"initSegment",value:function(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];if(!e)return null;var i=(0,h.initSegmentId)(e),r=this.initSegments_[i];return t&&!r&&e.bytes&&(this.initSegments_[i]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes}),r||e}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()}},{key:"load",value:function(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},{key:"init_",value:function(){return this.state="READY",this.sourceUpdater_=new l.default(this.mediaSource_,this.mimeType_),this.resetEverything(),this.monitorBuffer_()}},{key:"playlist",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(e){var i=this.playlist_,r=this.pendingSegment_;if(this.playlist_=e,this.xhrOptions_=t,this.hasPlayed_()||(e.syncInfo={mediaSequence:e.mediaSequence,time:0}),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(i&&i.uri===e.uri){var n=e.mediaSequence-i.mediaSequence;this.logger_("mediaSequenceDiff",n),null!==this.mediaIndex&&(this.mediaIndex-=n),r&&(r.mediaIndex-=n,r.mediaIndex>=0&&(r.segment=e.segments[r.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(i,e)}else null!==this.mediaIndex&&this.resyncLoader()}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(c.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function(e){this.mimeType_||(this.mimeType_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(){this.ended_=!1,this.resetLoader(),this.remove(0,this.duration_()),this.trigger("reseteverything")}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1,this.resyncLoader()}},{key:"resyncLoader",value:function(){this.mediaIndex=null,this.syncPoint_=null,this.abort()}},{key:"remove",value:function(e,t){this.sourceUpdater_&&this.sourceUpdater_.remove(e,t),(0,f.default)(e,t,this.segmentMetadataTrack_)}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&c.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=c.default.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&c.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=c.default.setTimeout(this.monitorBufferTick_.bind(this),500)}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var e=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);e&&(y(this.playlist_,this.mediaSource_,e.mediaIndex)?this.endOfStream():(e.mediaIndex!==this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_())&&((e.timeline!==this.currentTimeline_||null!==e.startOfSegment&&e.startOfSegment<this.sourceUpdater_.timestampOffset())&&(this.syncController_.reset(),e.timestampOffset=e.startOfSegment),this.loadSegment_(e)))}}},{key:"checkBuffer_",value:function(e,t,i,r,n,a){var s=0,u=void 0;e.length&&(s=e.end(e.length-1));var l,d=Math.max(0,s-n);if(!t.segments.length)return null;if(d>=this.goalBufferLength_())return null;if(!r&&d>=1)return null;if(this.logger_("checkBuffer_","mediaIndex:",i,"hasPlayed:",r,"currentTime:",n,"syncPoint:",a,"fetchAtBuffer:",this.fetchAtBuffer_,"bufferedTime:",d),null===a)return i=this.getSyncSegmentCandidate_(t),this.logger_("getSync","mediaIndex:",i),this.generateSegmentInfo_(t,i,null,!0);if(null!==i){this.logger_("walkForward","mediaIndex:",i+1);var c=t.segments[i];return u=c&&c.end?c.end:s,this.generateSegmentInfo_(t,i+1,u,!1)}return this.fetchAtBuffer_?(i=(l=o.default.getMediaInfoForTime(t,s,a.segmentIndex,a.time)).mediaIndex,u=l.startTime):(i=(l=o.default.getMediaInfoForTime(t,n,a.segmentIndex,a.time)).mediaIndex,u=l.startTime),this.logger_("getMediaIndexForTime","mediaIndex:",i,"startOfSegment:",u),this.generateSegmentInfo_(t,i,u,!1)}},{key:"getSyncSegmentCandidate_",value:function(e){var t=this;if(-1===this.currentTimeline_)return 0;var i=e.segments.map((function(e,t){return{timeline:e.timeline,segmentIndex:t}})).filter((function(e){return e.timeline===t.currentTimeline_}));return i.length?i[Math.min(i.length-1,1)].segmentIndex:Math.max(e.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function(e,t,i,r){if(t<0||t>=e.segments.length)return null;var n=e.segments[t];return{requestId:"segment-loader-"+Math.random(),uri:n.resolvedUri,mediaIndex:t,isSyncRequest:r,startOfSegment:i,playlist:e,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:n.timeline,duration:n.duration,segment:n}}},{key:"abortRequestEarly_",value:function(e){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return!1;if(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return!1;var t=this.currentTime_(),i=e.bandwidth,r=this.pendingSegment_.duration,n=o.default.estimateSegmentRequestTime(r,i,this.playlist_,e.bytesReceived),a=(0,g.timeUntilRebuffer)(this.buffered_(),t,this.hls_.tech_.playbackRate())-1;if(n<=a)return!1;var s=(0,p.minRebufferMaxBandwidthSelector)({master:this.hls_.playlists.master,currentTime:t,bandwidth:i,duration:this.duration_(),segmentDuration:r,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(s){var u=n-a-s.rebufferingImpact,l=.5;return a<=g.TIME_FUDGE_FACTOR&&(l=1),!(!s.playlist||s.playlist.uri===this.playlist_.uri||u<l||(this.bandwidth=s.playlist.attributes.BANDWIDTH*d.default.BANDWIDTH_VARIANCE+1,this.abort(),this.trigger("earlyabort"),0))}}},{key:"handleProgress_",value:function(e,t){this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(t.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function(e){this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),e.abortRequests=(0,m.mediaSegmentRequest)(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.createSimplifiedSegmentObj_(e),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(e){var t=b(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)}},{key:"createSimplifiedSegmentObj_",value:function(e){var t=e.segment,i={resolvedUri:t.resolvedUri,byterange:t.byterange,requestId:e.requestId};if(t.key){var r=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);i.key={resolvedUri:t.key.resolvedUri,iv:r}}return t.map&&(i.map=this.initSegment(t.map)),i}},{key:"segmentRequestFinished_",value:function(e,t){if(this.mediaRequests+=1,t.stats&&(this.mediaBytesTransferred+=t.stats.bytesReceived,this.mediaTransferDuration+=t.stats.roundTripTime),this.pendingSegment_){if(t.requestId===this.pendingSegment_.requestId){if(e)return this.pendingSegment_=null,this.state="READY",e.code===m.REQUEST_ERRORS.ABORTED?void(this.mediaRequestsAborted+=1):(this.pause(),e.code===m.REQUEST_ERRORS.TIMEOUT?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,void this.trigger("bandwidthupdate")):(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error")));this.bandwidth=t.stats.bandwidth,this.roundTrip=t.stats.roundTripTime,t.map&&(t.map=this.initSegment(t.map,!0)),this.processSegmentResponse_(t)}}else this.mediaRequestsAborted+=1}},{key:"processSegmentResponse_",value:function(e){var t=this.pendingSegment_;t.bytes=e.bytes,e.map&&(t.segment.map.bytes=e.map.bytes),t.endOfAllRequests=e.endOfAllRequests,this.handleSegment_()}},{key:"handleSegment_",value:function(){var e=this;if(this.pendingSegment_){var t=this.pendingSegment_,i=t.segment,r=this.syncController_.probeSegmentInfo(t);void 0===this.startingMedia_&&r&&(r.containsAudio||r.containsVideo)&&(this.startingMedia_={containsAudio:r.containsAudio,containsVideo:r.containsVideo});var n=v(this.loaderType_,this.startingMedia_,r);if(n)return this.error({message:n,blacklistDuration:1/0}),void this.trigger("error");if(t.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");null!==t.timestampOffset&&t.timestampOffset!==this.sourceUpdater_.timestampOffset()&&(this.sourceUpdater_.timestampOffset(t.timestampOffset),this.trigger("timestampoffset"));var a=this.syncController_.mappingForTimeline(t.timeline);null!==a&&this.trigger({type:"segmenttimemapping",mapping:a}),this.state="APPENDING",i.map&&function(){var t=(0,h.initSegmentId)(i.map);if(!e.activeInitSegmentId_||e.activeInitSegmentId_!==t){var r=e.initSegment(i.map);e.sourceUpdater_.appendBuffer(r.bytes,(function(){e.activeInitSegmentId_=t}))}}(),t.byteLength=t.bytes.byteLength,"number"==typeof i.start&&"number"==typeof i.end?this.mediaSecondsLoaded+=i.end-i.start:this.mediaSecondsLoaded+=i.duration,this.sourceUpdater_.appendBuffer(t.bytes,this.handleUpdateEnd_.bind(this))}else this.state="READY"}},{key:"handleUpdateEnd_",value:function(){if(this.logger_("handleUpdateEnd_","segmentInfo:",this.pendingSegment_),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_,t=e.segment,i=null!==this.mediaIndex;this.pendingSegment_=null,this.recordThroughput_(e),this.addSegmentMetadataCue_(e),this.state="READY",this.mediaIndex=e.mediaIndex,this.fetchAtBuffer_=!0,this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate"),t.end&&this.currentTime_()-t.end>3*e.playlist.targetDuration?this.resetEverything():(i&&this.trigger("bandwidthupdate"),this.trigger("progress"),y(e.playlist,this.mediaSource_,e.mediaIndex+1)&&this.endOfStream(),this.paused()||this.monitorBuffer_())}},{key:"recordThroughput_",value:function(e){var t=this.throughput.rate,i=Date.now()-e.endOfAllRequests+1,r=Math.floor(e.byteLength/i*8*1e3);this.throughput.rate+=(r-t)/++this.throughput.count}},{key:"logger_",value:function(){}},{key:"addSegmentMetadataCue_",value:function(e){if(this.segmentMetadataTrack_){var t=e.segment,i=t.start,r=t.end;if(_(i)&&_(r)){(0,f.default)(i,r,this.segmentMetadataTrack_);var n=c.default.WebKitDataCue||c.default.VTTCue,a={bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.uri,start:i,end:r},s=new n(i,r,JSON.stringify(a));s.value=a,this.segmentMetadataTrack_.addCue(s)}}}}]),t}(u.default.EventTarget);t.default=T},637:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(i(295)),a=r(i(192)),s=i(638),o=function(e,t){var i;return e&&(i=window.getComputedStyle(e))?i[t]:""},u=function(e,t){var i=e.slice();e.sort((function(e,r){var n=t(e,r);return 0===n?i.indexOf(e)-i.indexOf(r):n}))},l=function(e,t){var i=void 0,r=void 0;return e.attributes.BANDWIDTH&&(i=e.attributes.BANDWIDTH),i=i||window.Number.MAX_VALUE,t.attributes.BANDWIDTH&&(r=t.attributes.BANDWIDTH),i-(r||window.Number.MAX_VALUE)};t.comparePlaylistBandwidth=l,t.comparePlaylistResolution=function(e,t){var i=void 0,r=void 0;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(i=e.attributes.RESOLUTION.width),i=i||window.Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(r=t.attributes.RESOLUTION.width),i===(r=r||window.Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:i-r};var d=function(e,t,i,r){var s=e.playlists.map((function(e){var t,i;return t=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,i=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height,{bandwidth:e.attributes.BANDWIDTH||window.Number.MAX_VALUE,width:t,height:i,playlist:e}}));u(s,(function(e,t){return e.bandwidth-t.bandwidth}));var o=(s=s.filter((function(e){return!a.default.isIncompatible(e.playlist)}))).filter((function(e){return a.default.isEnabled(e.playlist)}));o.length||(o=s.filter((function(e){return!a.default.isDisabled(e.playlist)})));var l=o.filter((function(e){return e.bandwidth*n.default.BANDWIDTH_VARIANCE<t})),d=l[l.length-1],c=l.filter((function(e){return e.bandwidth===d.bandwidth}))[0],f=l.filter((function(e){return e.width&&e.height}));u(f,(function(e,t){return e.width-t.width}));var h=f.filter((function(e){return e.width===i&&e.height===r}));d=h[h.length-1];var m=h.filter((function(e){return e.bandwidth===d.bandwidth}))[0],g=void 0,p=void 0,y=void 0;m||(p=(g=f.filter((function(e){return e.width>i||e.height>r}))).filter((function(e){return e.width===g[0].width&&e.height===g[0].height})),d=p[p.length-1],y=p.filter((function(e){return e.bandwidth===d.bandwidth}))[0]);var _=y||m||c||o[0]||s[0];return _?_.playlist:null};t.simpleSelector=d,t.lastBandwidthSelector=function(){return d(this.playlists.master,this.systemBandwidth,parseInt(o(this.tech_.el(),"width"),10),parseInt(o(this.tech_.el(),"height"),10))},t.movingAverageBandwidthSelector=function(e){var t=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){return t<0&&(t=this.systemBandwidth),t=e*this.systemBandwidth+(1-e)*t,d(this.playlists.master,t,parseInt(o(this.tech_.el(),"width"),10),parseInt(o(this.tech_.el(),"height"),10))}},t.minRebufferMaxBandwidthSelector=function(e){var t=e.master,i=e.currentTime,r=e.bandwidth,n=e.duration,s=e.segmentDuration,o=e.timeUntilRebuffer,d=e.currentTimeline,c=e.syncController,f=t.playlists.filter((function(e){return!a.default.isIncompatible(e)})),h=f.filter(a.default.isEnabled);h.length||(h=f.filter((function(e){return!a.default.isDisabled(e)})));var m=h.filter(a.default.hasAttribute.bind(null,"BANDWIDTH")).map((function(e){var t=c.getSyncPoint(e,n,d,i)?1:2;return{playlist:e,rebufferingImpact:a.default.estimateSegmentRequestTime(s,r,e)*t-o}})),g=m.filter((function(e){return e.rebufferingImpact<=0}));return u(g,(function(e,t){return l(t.playlist,e.playlist)})),g.length?g[0]:(u(m,(function(e,t){return e.rebufferingImpact-t.rebufferingImpact})),m[0]||null)},t.lowestBitrateCompatibleVariantSelector=function(){var e=this.playlists.master.playlists.filter(a.default.isEnabled);return u(e,(function(e,t){return l(e,t)})),e.filter((function(e){return(0,s.parseCodecs)(e.attributes.CODECS).videoCodec}))[0]||null}},638:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseCodecs=function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],t={codecCount:0},i=void 0;return t.codecCount=e.split(",").length,t.codecCount=t.codecCount||2,(i=/(^|\s|,)+(avc1)([^ ,]*)/i.exec(e))&&(t.videoCodec=i[2],t.videoObjectTypeIndicator=i[3]),t.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(e),t.audioProfile=t.audioProfile&&t.audioProfile[2],t}},640:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=i(75))&&r.__esModule?r:{default:r},a=i(625),s=i(238),o=function(e){e.onmessage=function(e){var t=e.data,i=new Uint8Array(t.encrypted.bytes,t.encrypted.byteOffset,t.encrypted.byteLength),r=new Uint32Array(t.key.bytes,t.key.byteOffset,t.key.byteLength/4),o=new Uint32Array(t.iv.bytes,t.iv.byteOffset,t.iv.byteLength/4);new a.Decrypter(i,r,o,(function(e,i){n.default.postMessage((0,s.createTransferableMessage)({source:t.source,decrypted:i}),[i.buffer])}))}};t.default=function(e){return new o(e)},e.exports=t.default}}]);